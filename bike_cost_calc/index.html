<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>バイク維持費シミュレーター Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen font-sans">

    <header class="bg-green-600 p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex items-center justify-between">
            <h1 class="text-xl font-bold flex items-center gap-2">
                <i class="fas fa-motorcycle"></i> 維持費シミュレーター Pro
            </h1>
            <a href="../index.html" class="text-sm bg-green-700 px-3 py-1 rounded hover:bg-green-500 transition">Homeへ</a>
        </div>
    </header>

    <main class="container mx-auto p-4 max-w-2xl">
        
        <div class="bg-gray-800 rounded-xl p-6 mb-6 shadow-xl border border-gray-700">
            <label class="block text-sm text-gray-400 mb-2">▼ 車種を選択して自動入力</label>
            <select id="bike-select" onchange="loadPreset()" class="w-full p-3 bg-gray-700 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-green-500 border border-gray-600">
                <option value="custom">✓ カスタム（手動入力）</option>

                <optgroup label="HONDA - PCX/Scooter 125-160cc">
                    <option value="pcx125">PCX 125</option>
                    <option value="pcx160">PCX 160</option>
                    <option value="adv160">ADV 160</option>
                    <option value="lead125">リード 125</option>
                    <option value="forza125">FORZA 125</option>
                    <option value="dio110">Dio 110</option>
                    <option value="benly110">ベンリィ 110</option>
                </optgroup>

                <optgroup label="HONDA - Cub/Gear (カブ系)">
                    <option value="sc_c125">スーパーカブ C125</option>
                    <option value="ct125">CT125 ハンターカブ</option>
                    <option value="sc50">スーパーカブ 50</option>
                </optgroup>

                <optgroup label="HONDA - 3 Wheels (3輪)">
                    <option value="gyro_canopy">ジャイロキャノピー</option>
                    <option value="gyro_x">ジャイロX</option>
                </optgroup>

                <optgroup label="HONDA - 50cc Scooter">
                    <option value="tact">タクト (Tact)</option>
                    <option value="benly50">ベンリィ 50</option>
                </optgroup>

                <optgroup label="YAMAHA - 125-155cc">
                    <option value="nmax125">NMAX 125</option>
                    <option value="nmax155">NMAX 155</option>
                    <option value="cygnus_gryphus">シグナス グリファス</option>
                    <option value="xforce">X FORCE</option>
                    <option value="axis_z">アクシスZ</option>
                    <option value="jog125">JOG 125</option>
                    <option value="vino125">VINO 125 (輸入)</option>
                </optgroup>

                <optgroup label="YAMAHA - 3 Wheels (LMW)">
                    <option value="tricity125">トリシティ 125</option>
                    <option value="tricity155">トリシティ 155</option>
                </optgroup>

                <optgroup label="YAMAHA - 50cc">
                    <option value="jog">JOG</option>
                    <option value="vino">VINO</option>
                </optgroup>

                <optgroup label="SUZUKI - 110-125cc">
                    <option value="address125">アドレス 125</option>
                    <option value="avenis125">アヴェニス 125</option>
                    <option value="burgman125">バーグマンストリート 125EX</option>
                    <option value="address110">アドレス 110</option>
                </optgroup>

                <optgroup label="SUZUKI - 50cc">
                    <option value="lets">レッツ (Let's)</option>
                </optgroup>
            </select>
        </div>

        <div class="bg-gray-800 rounded-xl p-6 mb-6 shadow-xl border border-gray-700">
            <h2 class="text-lg font-bold mb-4 border-b border-gray-600 pb-2 text-green-400">走行・燃費データ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-xs text-gray-400 mb-1">月間走行距離 (km)</label>
                    <input type="number" id="distance" value="1000" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right">
                </div>
                <div>
                    <label class="block text-xs text-gray-400 mb-1">実燃費 (km/L)</label>
                    <input type="number" id="fuel-efficiency" value="45" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right">
                </div>
                <div>
                    <label class="block text-xs text-gray-400 mb-1">ガソリン単価 (円/L)</label>
                    <input type="number" id="gas-price" value="170" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right">
                </div>
            </div>

            <h2 class="text-lg font-bold mt-6 mb-4 border-b border-gray-600 pb-2 text-blue-400">消耗品コスト (工賃込・概算)</h2>
            <div class="space-y-4">
                <div class="grid grid-cols-2 gap-2 items-center bg-gray-700 p-3 rounded">
                    <div class="col-span-2 text-xs text-blue-200 mb-1">オイル交換 (費用 / 交換頻度)</div>
                    <input type="number" id="oil-cost" value="2500" class="p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm" placeholder="円">
                    <div class="flex items-center">
                        <input type="number" id="oil-life" value="3000" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm">
                        <span class="ml-1 text-xs text-gray-400">km</span>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-2 items-center bg-gray-700 p-3 rounded">
                    <div class="col-span-2 text-xs text-blue-200 mb-1">タイヤ交換 (前後セット工賃込 / 寿命)</div>
                    <input type="number" id="tire-cost" value="18000" class="p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm" placeholder="円">
                    <div class="flex items-center">
                        <input type="number" id="tire-life" value="15000" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm">
                        <span class="ml-1 text-xs text-gray-400">km</span>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-2 items-center bg-gray-700 p-3 rounded">
                    <div class="col-span-2 text-xs text-blue-200 mb-1">ベルト/チェーン・駆動系 (費用 / 寿命)</div>
                    <input type="number" id="belt-cost" value="15000" class="p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm" placeholder="円">
                    <div class="flex items-center">
                        <input type="number" id="belt-life" value="20000" class="w-full p-2 bg-gray-900 border border-gray-600 rounded text-white text-right text-sm">
                        <span class="ml-1 text-xs text-gray-400">km</span>
                    </div>
                </div>
            </div>

            <button onclick="calculate()" class="w-full mt-6 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-400 hover:to-blue-500 text-white font-bold py-3 rounded-lg shadow-lg transform transition active:scale-95">
                計算する
            </button>
        </div>

        <div id="result-area" class="hidden animate-fade-in">
            <div class="bg-gray-800 rounded-xl p-6 shadow-xl border border-gray-700 mb-6">
                <h3 class="text-center text-gray-400 text-sm mb-2">1kmあたりの推定コスト</h3>
                <div class="text-4xl font-bold text-center text-yellow-400 mb-1">
                    <span id="cost-per-km">0</span> <span class="text-lg text-gray-300">円/km</span>
                </div>
                <div class="text-center text-xs text-gray-500 mb-6">（ガソリン代 + メンテナンス積立）</div>

                <div class="grid grid-cols-2 gap-4 text-center border-t border-gray-700 pt-4">
                    <div>
                        <div class="text-gray-400 text-xs">月間の維持費</div>
                        <div class="text-xl font-bold text-white"><span id="monthly-cost">0</span> 円</div>
                    </div>
                    <div>
                        <div class="text-gray-400 text-xs">年間の維持費</div>
                        <div class="text-xl font-bold text-white"><span id="yearly-cost">0</span> 円</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-4 shadow-xl mb-6">
                <h3 class="text-gray-800 text-sm font-bold mb-2 text-center">メンテナンス費用比較 (1kmあたり・燃料費除く)</h3>
                <canvas id="costChart"></canvas>
            </div>
        </div>

    </main>

    <script>
        // ▼ データベース (工賃込み概算値)
        // ※価格は標準的なバイクショップ価格を想定した推定値です。
        const bikeData = {
            // --- HONDA ---
            "pcx125": { fuel: 48, oilPrice: 2500, oilLife: 3000, tirePrice: 22000, tireLife: 15000, beltPrice: 15000, beltLife: 20000 },
            "pcx160": { fuel: 45, oilPrice: 2500, oilLife: 3000, tirePrice: 24000, tireLife: 14000, beltPrice: 16000, beltLife: 20000 },
            "adv160": { fuel: 42, oilPrice: 2500, oilLife: 3000, tirePrice: 26000, tireLife: 12000, beltPrice: 16000, beltLife: 20000 },
            "lead125": { fuel: 48, oilPrice: 2200, oilLife: 3000, tirePrice: 16000, tireLife: 15000, beltPrice: 14000, beltLife: 20000 },
            "forza125": { fuel: 40, oilPrice: 3000, oilLife: 3000, tirePrice: 28000, tireLife: 15000, beltPrice: 18000, beltLife: 20000 },
            "dio110": { fuel: 50, oilPrice: 2000, oilLife: 3000, tirePrice: 16000, tireLife: 18000, beltPrice: 13000, beltLife: 20000 },
            "benly110": { fuel: 45, oilPrice: 2000, oilLife: 3000, tirePrice: 16000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            
            // カブ系 (ベルトなし→チェーン代として計算)
            "sc_c125": { fuel: 65, oilPrice: 2000, oilLife: 3000, tirePrice: 15000, tireLife: 12000, beltPrice: 10000, beltLife: 20000 }, 
            "ct125": { fuel: 60, oilPrice: 2000, oilLife: 3000, tirePrice: 16000, tireLife: 10000, beltPrice: 12000, beltLife: 15000 },
            "sc50": { fuel: 75, oilPrice: 1800, oilLife: 3000, tirePrice: 12000, tireLife: 15000, beltPrice: 8000, beltLife: 20000 },

            // 3輪 (タイヤ3本分で計算)
            "gyro_canopy": { fuel: 35, oilPrice: 2200, oilLife: 3000, tirePrice: 28000, tireLife: 15000, beltPrice: 15000, beltLife: 15000 },
            "gyro_x": { fuel: 35, oilPrice: 2200, oilLife: 3000, tirePrice: 25000, tireLife: 15000, beltPrice: 15000, beltLife: 15000 },

            // 50cc
            "tact": { fuel: 55, oilPrice: 1800, oilLife: 3000, tirePrice: 12000, tireLife: 15000, beltPrice: 10000, beltLife: 15000 },
            "benly50": { fuel: 55, oilPrice: 1800, oilLife: 3000, tirePrice: 12000, tireLife: 15000, beltPrice: 10000, beltLife: 15000 },

            // --- YAMAHA ---
            "nmax125": { fuel: 45, oilPrice: 2500, oilLife: 3000, tirePrice: 19000, tireLife: 15000, beltPrice: 15000, beltLife: 20000 },
            "nmax155": { fuel: 42, oilPrice: 2500, oilLife: 3000, tirePrice: 20000, tireLife: 14000, beltPrice: 16000, beltLife: 20000 },
            "cygnus_gryphus": { fuel: 40, oilPrice: 2500, oilLife: 3000, tirePrice: 19000, tireLife: 12000, beltPrice: 15000, beltLife: 20000 },
            "xforce": { fuel: 40, oilPrice: 2500, oilLife: 3000, tirePrice: 20000, tireLife: 12000, beltPrice: 15000, beltLife: 20000 },
            "axis_z": { fuel: 50, oilPrice: 2200, oilLife: 3000, tirePrice: 14000, tireLife: 18000, beltPrice: 13000, beltLife: 20000 },
            "jog125": { fuel: 50, oilPrice: 2200, oilLife: 3000, tirePrice: 14000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            "vino125": { fuel: 48, oilPrice: 2200, oilLife: 3000, tirePrice: 14000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            
            // 3輪 LMW
            "tricity125": { fuel: 38, oilPrice: 2500, oilLife: 3000, tirePrice: 32000, tireLife: 15000, beltPrice: 16000, beltLife: 20000 },
            "tricity155": { fuel: 36, oilPrice: 2500, oilLife: 3000, tirePrice: 34000, tireLife: 15000, beltPrice: 17000, beltLife: 20000 },

            // 50cc
            "jog": { fuel: 55, oilPrice: 1800, oilLife: 3000, tirePrice: 12000, tireLife: 15000, beltPrice: 10000, beltLife: 15000 },
            "vino": { fuel: 55, oilPrice: 1800, oilLife: 3000, tirePrice: 12000, tireLife: 15000, beltPrice: 10000, beltLife: 15000 },

            // --- SUZUKI ---
            "address125": { fuel: 50, oilPrice: 2000, oilLife: 3000, tirePrice: 15000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            "avenis125": { fuel: 48, oilPrice: 2000, oilLife: 3000, tirePrice: 16000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            "burgman125": { fuel: 48, oilPrice: 2200, oilLife: 3000, tirePrice: 16000, tireLife: 15000, beltPrice: 13000, beltLife: 20000 },
            "address110": { fuel: 48, oilPrice: 2000, oilLife: 3000, tirePrice: 16000, tireLife: 18000, beltPrice: 13000, beltLife: 20000 },
            "lets": { fuel: 55, oilPrice: 1600, oilLife: 3000, tirePrice: 11000, tireLife: 15000, beltPrice: 9000, beltLife: 15000 }
        };

        // グラフのインスタンス保持用
        let myChart = null;

        // プリセット読み込み
        function loadPreset() {
            const select = document.getElementById("bike-select");
            const val = select.value;
            if (val === "custom") return;

            const data = bikeData[val];
            if (data) {
                document.getElementById("fuel-efficiency").value = data.fuel;
                document.getElementById("oil-cost").value = data.oilPrice;
                document.getElementById("oil-life").value = data.oilLife;
                document.getElementById("tire-cost").value = data.tirePrice;
                document.getElementById("tire-life").value = data.tireLife;
                document.getElementById("belt-cost").value = data.beltPrice;
                document.getElementById("belt-life").value = data.beltLife;
            }
            // 自動計算
            calculate();
        }

        // 計算ロジック
        function calculate() {
            // 入力値の取得
            const distance = parseFloat(document.getElementById("distance").value);
            const fuelEff = parseFloat(document.getElementById("fuel-efficiency").value);
            const gasPrice = parseFloat(document.getElementById("gas-price").value);
            
            const oilCost = parseFloat(document.getElementById("oil-cost").value);
            const oilLife = parseFloat(document.getElementById("oil-life").value);
            
            const tireCost = parseFloat(document.getElementById("tire-cost").value);
            const tireLife = parseFloat(document.getElementById("tire-life").value);
            
            const beltCost = parseFloat(document.getElementById("belt-cost").value);
            const beltLife = parseFloat(document.getElementById("belt-life").value);

            // 1kmあたりのコスト計算
            const gasPerKm = gasPrice / fuelEff;
            const oilPerKm = oilCost / oilLife;
            const tirePerKm = tireCost / tireLife;
            const beltPerKm = beltCost / beltLife;
            
            const maintPerKm = oilPerKm + tirePerKm + beltPerKm;
            const totalPerKm = gasPerKm + maintPerKm;

            // 月間・年間コスト
            const monthly = totalPerKm * distance;
            const yearly = monthly * 12;

            // 表示更新
            document.getElementById("cost-per-km").innerText = totalPerKm.toFixed(1);
            document.getElementById("monthly-cost").innerText = Math.round(monthly).toLocaleString();
            document.getElementById("yearly-cost").innerText = Math.round(yearly).toLocaleString();

            // 結果エリアを表示
            document.getElementById("result-area").classList.remove("hidden");

            // グラフを更新
            updateChart(maintPerKm);
        }

        // グラフ描画
        function updateChart(userMaintCost) {
            const ctx = document.getElementById('costChart').getContext('2d');
            
            // 既存のチャートがあれば破棄
            if (myChart) {
                myChart.destroy();
            }

            // 比較用データ（目安）
            const benchmarks = [
                { label: '50ccスクーター平均', value: 2.1 }, // タイヤ安、ベルト安
                { label: 'スーパーカブ110', value: 1.8 },   // チェーン安、タイヤ安、最強
                { label: 'PCX/NMAX系', value: 3.5 },      // 標準的
                { label: '3輪(ジャイロ/トリシティ)', value: 5.5 }, // タイヤ高い
                { label: 'あなたの設定', value: userMaintCost }
            ];

            // チャート作成
            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: benchmarks.map(b => b.label),
                    datasets: [{
                        label: '1kmあたりのメンテナンス費用 (円)',
                        data: benchmarks.map(b => b.value),
                        backgroundColor: benchmarks.map(b => 
                            b.label === 'あなたの設定' ? 'rgba(255, 99, 132, 0.8)' : 'rgba(54, 162, 235, 0.6)'
                        ),
                        borderColor: benchmarks.map(b => 
                            b.label === 'あなたの設定' ? 'rgba(255, 99, 132, 1)' : 'rgba(54, 162, 235, 1)'
                        ),
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y', // 横棒グラフにする
                    responsive: true,
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '円 / km'
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }
    </script>
</body>
</html>